<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.png">
    <title>pebble prism</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="//use.typekit.net/age3egr.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>
  </head>
  <body>

    <section class="intro-container">
      <h1 class="intro-logo">pebble prism</h1>
      <h2 class="intro-text">Better today. Tomorrow. <strong>Prism.</strong></h2>
      <h3 class="intro-hidden-text">We are watching you.</h3>
    </section>
    <!-- /.intro-container -->
    
    <section class="map-container">

    </section>
    <!-- /.map-container -->

    <section class="data-container">
      <div class="data-container-inner">
        <header class="data-head">
          <h1 class="data-head-logo">pebble prism</h1>
        </header>
        <div class="data-widget-container">
          <div class="data-widget">
            <h3>Total number of devices</h3>
            <span>34</span>
          </div>
          <ul class="data-widget-col">
            <li class="data-widget">
              <h3>Apple Devices</h3>
              <span class="apple">34</span>
            </li>
            <li class="data-widget">
              <h3>Android Devices</h3>
              <span class="android">34</span>
            </li>
            <li class="data-widget">
              <h3>Other data</h3>
              <span>34</span>
            </li>
          </ul>
          <ul class="data-widget-col">
            <li class="data-widget">
              <h3>Manufacturers</h3>
              <ul class="data-widget-list">
                <li>
                  <h4>Samsung</h4>
                  <span>23</span>
                </li>
                <li>
                  <h4>Apple</h4>
                  <span>23</span>
                </li>
                <li>
                  <h4>Motorola</h4>
                  <span>23</span>
                </li>
                <li>
                  <h4>LG</h4>
                  <span>23</span>
                </li>
              </ul>
            </li>
          </ul>
        </div>
        <footer class="data-foot">We are watching you.</footer>
      </div>
    </section>
    <!-- /.data-container -->

    <div id="data"></div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript">

      $(document).ready(function () {
        var container = $('#data');

        var es = new EventSource('./subscribe');

        es.onopen = function (e) {};

        es.onmessage = function (e) {
          var msg = JSON.parse(e.data);
          container.append('<pre>' + JSON.stringify(msg.data) + '</pre>');
        };

        es.onerror = function (e) {
          if (e.readyState == EventSource.CLOSED) {
            console.log("connection closed");
          }
        };
      });

    </script>
  </body>
</html>